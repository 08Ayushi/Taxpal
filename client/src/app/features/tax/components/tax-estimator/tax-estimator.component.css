/* ====== Shared layout ====== */
:host{
  display:flex;
  height:100vh;
  overflow:hidden;           /* only the .main scrolls */
  background:#FBFBFB;
  font-family:Arial, sans-serif;
}

/* Sidebar */
.sidebar{
  width:250px;
  background:#FBFBFB;
  color:#25295A;
  height:100%;
  padding:15px 0;
  display:flex; flex-direction:column; justify-content:space-between;
  flex-shrink:0; position:relative;
}
.sidebar h1{ text-align:center; margin-bottom:20px; color:#25295A; font-size:34px; font-weight:800; }
.menu a{
  display:flex; align-items:center; gap:10px;
  color:#25295A; padding:10px 15px; text-decoration:none; font-size:16px; border-radius:8px;
}
.menu a:hover{ background:#534CA4; color:#FBFBFB; }
.menu a .nav-ic{ width:18px; height:18px; flex:0 0 18px; color:currentColor; }

/* Profile */
.profile{ margin-top:auto; padding:12px 12px 8px; border-top:1px solid #e9e9ef; background:#F5F6FF; border-radius:10px; margin:12px; }
.profile-top{ display:grid; grid-template-columns:44px 1fr; gap:10px; align-items:center; }
.avatar{ width:44px; height:44px; border-radius:50%; display:grid; place-items:center; font-weight:700; color:#fff; background:#5c62d6; letter-spacing:.5px; }
.who .name{ font-weight:700; color:#2d335f; line-height:1.2; }
.who .email{ font-size:12px; color:#6c6f91; margin-top:2px; word-break:break-all; }
.profile-actions{ display:grid; grid-template-columns:1fr 1fr; gap:8px 14px; padding:10px 2px 2px; margin-top:6px; }
.profile-actions .action{ display:inline-flex; align-items:center; gap:8px; text-decoration:none; font-size:14px; color:#404574; padding:4px 2px; border-radius:8px; transition:background .15s ease, color .15s ease; }
.profile-actions .action:hover{ background:#ECEEFF; color:#2d335f; }
.profile-actions .action svg{ width:18px; height:18px; }

/* Main column (sole scroller) */
.main{
  flex:1;
  padding:0 0 15px 15px;
  display:flex; flex-direction:column; gap:10px;
  overflow-y:auto;               /* the ONLY vertical scroll area */
  overflow-x:hidden;
  background:#EBEFFF; margin-left:0;

  /* smooth slide when drawer opens on mobile */
  transition: transform .25s ease;
  will-change: transform;
}

/* ============ STICKY HEADER (title + tabs + back) ============ */
.sticky-header{
  position:-webkit-sticky; position:sticky;
  top:0;
  z-index:1200;                  /* above page content, below overlays */
  background:#EBEFFF;
  border-bottom:1px solid #e6e8ff;
  box-shadow:0 2px 8px rgba(0,0,0,.04);
  padding:8px 0 12px;
}

/* top bar only holds hamburger */
.top-bar{ display:flex; align-items:center; min-height:0; }
.hamburger{
  display:none;
  width:40px; height:40px; border:1px solid #e6e8ff;
  border-radius:8px; background:#5c62d6; color:#FBFBFB; cursor:pointer;
  align-items:center; justify-content:center;
}

/* Header row: title left, actions right */
.page-header{
  width:100%;
  display:flex; align-items:center; gap:12px; margin:0; padding:0;
}
.page-title--brandlike{
  color:#25295A; font-size:34px; font-weight:800; margin:0; line-height:1.1;
}
.header-actions{
  margin-left:auto; display:flex; align-items:center; gap:8px; flex-wrap:wrap; margin-right:15px;
}

/* Buttons/Tabs */
.tab-btn{
  border-radius:10px; padding:10px 14px; font-weight:700; font-size:14px;
  border:1px solid #d7d9ff; background:#f4f6ff; color:#4a4fd4; cursor:pointer;
  transition:background .15s ease, transform .05s ease, color .15s ease, border-color .15s ease;
}
.tab-btn:hover{ background:#eef0ff; }
.tab-btn:active{ transform:translateY(1px); }
.tab-btn.active{ background:#656ed3; color:#fff; border-color:#656ed3; }

.btn-back{
  display:inline-flex; align-items:center; justify-content:center;
  padding:10px 14px; border-radius:10px; text-decoration:none;
  border:1px solid #e0e3ff; background:#fff; color:#25295A; font-weight:700; font-size:14px;
  transition:background .15s ease, border-color .15s ease, transform .05s ease, color .15s ease;
}
.btn-back:hover{ background:#f5f6ff; border-color:#cfd4ff; color:#1f2456; }
.btn-back:active{ transform:translateY(1px); }

/* Drawer overlay & close (sits ABOVE sticky header) */
.drawer-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(1px);
  z-index:2000; display:none;
}
.drawer-overlay.open{ display:block; }
.close-mobile{
  display:none; position:absolute; right:10px; top:10px; width:30px; height:30px;
  border-radius:8px; border:1px solid #e6e8ff; background:#fff; color:#25295A; cursor:pointer; font-size:18px;
}

/* ====== Content / Cards ====== */
.form-section{ display:block; padding:8px 15px 20px; }

.form-card{
  width:100%;
  background:#fff;
  border-radius:16px;
  padding:32px;
  max-height:none !important;
  overflow:visible !important;
  position:relative;
  border:none;
  box-shadow:0 20px 25px -5px rgba(0,0,0,.10), 0 10px 10px -5px rgba(0,0,0,.04);
}
.form-card-header{ display:flex; align-items:center; justify-content:space-between; padding:0 0 24px; border-bottom:1px solid #eef2f7; }
.form-card-title{ font-size:28px; font-weight:600; color:#656ed3; margin:0; letter-spacing:-.02em; }

.icon-btn{
  appearance:none; border:none; background:transparent;
  width:32px; height:32px; font-size:22px; line-height:1; cursor:pointer; color:#6B7280;
  display:flex; align-items:center; justify-content:center; border-radius:8px; transition:all .2s ease;
}
.icon-btn:hover{ background:#F3F4F6; color:#374151; }

/* Grid */
.grid{ display:grid; gap:24px; margin-top:24px; width:100%; }
.grid-2{ grid-template-columns:repeat(2, minmax(0, 1fr)); }
.grid-1{ grid-template-columns:1fr; }
@media (max-width:720px){ .grid-2{ grid-template-columns:1fr; gap:16px; } }

/* Inputs */
.form-group{ display:flex; flex-direction:column; }
.form-group label{ font-size:16px; font-weight:600; color:#111113; margin-bottom:8px; }
.input, .textarea{
  width:100%; padding:14px 16px; border:2px solid black; border-radius:8px; font-size:16px;
  background:#e8e9ec; transition:all .2s ease; font-family:inherit; color:#0f172a; outline:none;
}
.input::placeholder, .textarea::placeholder{ color:#494b50; }
.input:focus, .textarea:focus{ border-color:#8B7FF7; box-shadow:0 0 0 3px rgba(139,127,247,.10); }

.select-wrap{ position:relative; }
.select-wrap .input{ appearance:none; padding-right:40px; }
.select-wrap .chevron{
  position:absolute; right:12px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; color:#6B7280; pointer-events:none;
}

.currency-wrap{ position:relative; }
.currency-prefix{
  position:absolute; inset-inline-start:16px; top:50%; transform:translateY(-50%);
  color:#717681; font-size:16px; font-weight:500; z-index:1;
}
.pl-currency{ padding-left:32px; }

.actions{ display:flex; justify-content:flex-end; gap:16px; margin-top:12px; }
.btn{ border-radius:8px; padding:12px 24px; font-weight:600; font-size:16px; border:none; cursor:pointer; min-width:100px; transition:all .2s ease; }
.btn-primary{ background:#656ed3; color:#fff; }
.btn-primary:hover:not(:disabled){ transform:translateY(-1px); }
.btn-primary:disabled{ cursor:not-allowed; }

/* Snackbar & Modal */
.snack-container{ position:fixed; inset-inline:0; bottom:20px; display:grid; place-items:center; gap:8px; pointer-events:none; z-index:9999; }
.snack{ pointer-events:auto; display:inline-flex; align-items:center; gap:12px; padding:12px 16px; border-radius:10px; box-shadow:0 10px 20px -8px rgba(0,0,0,.35); color:#fff; font-weight:600; max-width:min(92vw, 720px); animation:snack-in .18s ease-out; }
.snack.success{ background:#16a34a; } .snack.error{ background:#dc2626; } .snack.info{ background:#111827; }
.snack-close{ appearance:none; background:transparent; border:0; color:inherit; font-size:18px; line-height:1; cursor:pointer; opacity:.9; }
.snack-close:hover{ opacity:1; transform:scale(1.05); }

/* ==== Modal (Budgets): ensure above header, no overlap ==== */
.modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.35); backdrop-filter: blur(1px); z-index: 3000; }
.modal-shell { position: fixed; inset: 0; padding: 24px; display: flex; align-items: center; justify-content: center; z-index: 3005; }
.modal-content {
  width: min(96vw, 880px);
  max-height: 88vh;
  background: #fff;
  border-radius: 16px;
  padding: 0;
  box-shadow: 0 20px 25px -5px rgba(0,0,0,.10), 0 10px 10px -5px rgba(0,0,0,.04);
  display: flex; flex-direction: column; overflow: hidden;
}
.modal-scroll{
  padding: 20px;
  overflow: auto;
  max-height: 88vh;
}

/* ====== Responsive tweaks ====== */
@media (max-width:900px){
  .page-title--brandlike{ font-size:30px; }
  .header-actions{ gap:6px; }
  .tab-btn, .btn-back{ padding:9px 12px; font-size:13px; }
}

/* ====== Mobile (no overlap with drawer) ====== */
@media (max-width:1024px){
  .hamburger{ display:inline-flex; }

  /* Drawer sits ABOVE sticky header */
  .sidebar{
    position:fixed; top:0; left:0; height:100vh; width:280px;
    transform:translateX(-100%); transition:transform .25s ease;
    z-index:2001; box-shadow:0 20px 50px rgba(0,0,0,.25);
  }
  .sidebar.open{ transform:translateX(0); }

  /* While drawer open, disable hamburger to avoid double tap */
  .sidebar.open + .main .sticky-header .hamburger{
    opacity:0; pointer-events:none;
  }

  /* Slide main content right so it doesn't get overlapped by the drawer */
  :host:has(.sidebar.open) .main{
    transform: translateX(280px);
  }

  /* Title beside hamburger; actions wrap below */
  .sticky-header{ padding-top:10px; }
  .page-header{
    position:relative;
    padding-left:56px;   /* space for hamburger */
    flex-wrap:wrap; gap:8px;
  }
  .header-actions{
    flex:0 0 100%;
    width:100%;
    margin:8px 0 0 0;
    display:flex; flex-wrap:wrap; gap:8px;
  }
}

@media (max-width:600px){
  .page-title--brandlike{ font-size:26px; }
  .tab-btn, .btn-back{ padding:7px 10px; font-size:12px; }
}

/* ====== Scroll locking when overlays are open ====== */
.main:has(.modal-shell){ overflow: hidden; }                 /* lock background while modal open */
:host:has(.drawer-overlay.open) .main{ overflow: hidden; }   /* lock while drawer open */
