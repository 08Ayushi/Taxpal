<div class="auth-page">
  <div class="card">
    <h1 class="brand">TaxPal</h1>
    <h2 class="title">Reset Password</h2>

    <form [formGroup]="form" (ngSubmit)="submit()" class="form" novalidate>
      <label class="label" for="password">New Password</label>
      <input
        id="password"
        type="password"
        class="input"
        formControlName="password"
        placeholder="Enter a new password"
        autocomplete="new-password"
      />

      <label class="label" for="confirm">Confirm New Password</label>
      <input
        id="confirm"
        type="password"
        class="input"
        formControlName="confirm"
        placeholder="Re-enter new password"
        autocomplete="new-password"
      />

      <!-- ✅ strict-safe check -->
      <p class="field-error"
         *ngIf="form.hasError('mismatch') && (form.touched || form.get('confirm')?.touched)">
        Passwords don’t match.
      </p>

      <!-- Alternatively, this is also valid:
      <p class="field-error"
         *ngIf="form.errors?.['mismatch'] && (form.touched || form.get('confirm')?.touched)">
        Passwords don’t match.
      </p>
      -->

      <button type="submit" class="btn" [disabled]="form.invalid || isLoading()">
        {{ isLoading() ? 'Resetting…' : 'Reset password' }}
      </button>
    </form>

    <p *ngIf="message()" class="note success">{{ message() }}</p>
    <p *ngIf="error()" class="note error">{{ error() }}</p>

    <!-- Back to login -->
    <div class="back-to-login-link">
      <p>
        Back to <a routerLink="/login" class="back-to-login-text">Login</a>
      </p>
    </div>
  </div>
</div>
