:host { display:flex; height:100vh; overflow:hidden; font-family:Arial, sans-serif; background:#FBFBFB; }

/* Sidebar */
.sidebar{
  width:250px; background:#FBFBFB; color:#25295A;
  /* make the sidebar itself the scroller, and size to dynamic viewport */
  height:100vh; height:100dvh; height:100svh;
  max-height:100dvh;
  padding:15px 0;
  padding-bottom:calc(env(safe-area-inset-bottom,0px) + 12px);
  display:flex; flex-direction:column; justify-content:space-between;
  flex-shrink:0; position:relative;
  overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain;
}
.sidebar h1{ text-align:center; margin-bottom:20px; color:#25295A; font-size:34px; }
.menu a{ display:flex; align-items:center; gap:10px; color:#25295A; padding:10px 15px; text-decoration:none; font-size:16px; border-radius:8px; }
.menu a:hover{ background:#534CA4; color:#FBFBFB; }
.menu a .nav-ic{ width:18px; height:18px; flex:0 0 18px; color:currentColor; }

/* Profile */
.profile{ margin-top:auto; padding:12px 12px 8px; border-top:1px solid #e9e9ef; background:#F5F6FF; border-radius:10px; margin:12px; }
.profile-top{ display:grid; grid-template-columns:44px 1fr; gap:10px; align-items:center; }
.avatar{ width:44px; height:44px; border-radius:50%; display:grid; place-items:center; font-weight:700; color:#fff; background:#5c62d6; letter-spacing:.5px; }
.who .name{ font-weight:700; color:#2d335f; line-height:1.2; }
.who .email{ font-size:12px; color:#6c6f91; margin-top:2px; word-break:break-all; }
.profile-actions{ display:grid; grid-template-columns:1fr 1fr; gap:8px 14px; padding:10px 2px 2px; margin-top:6px; }
.profile-actions .action{ display:inline-flex; align-items:center; gap:8px; text-decoration:none; font-size:14px; color:#404574; padding:4px 2px; border-radius:8px; transition:background .15s ease, color .15s ease; }
.profile-actions .action:hover{ background:#ECEEFF; color:#2d335f; }
.profile-actions .action svg{ width:18px; height:18px; fill:currentColor; }

/* Main */
.main{
  flex:1; padding:15px; display:flex; flex-direction:column; gap:10px; overflow:auto; background:#EBEFFF; margin-left:0;
}
.main.modal-open{ overflow:hidden; }

/* Sticky top bar */
.top-bar{ display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:8px; }
.top-bar h1{ font-size:34px; color:#2d3e50; }
.top-bar button{ padding:8px 14px; font-size:14px; margin-left:8px; margin-top:5px; background:#534CA4; color:#fff; border:none; border-radius:6px; cursor:pointer; min-height:36px; }
.top-bar--sticky{
  position:sticky; top:0;
  z-index:997;
  background:#EBEFFF; border-bottom:1px solid #e6e8ff; padding:10px 12px;
}

/* Hamburger */
.hamburger{ display:none; width:40px; height:40px; border:1px solid #e6e8ff; border-radius:8px; background:#fff; cursor:pointer; align-items:center; justify-content:center; gap:4px; }
.hamburger span{ display:block; width:18px; height:2px; background:#ffffffff; }

/* Cards */
.cards{ display:grid; grid-template-columns:repeat(4,1fr); gap:15px; text-align:center; flex-shrink:0; }
.card{ background:#fff; padding:10px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.1); }
.card h3{ margin:0 0 8px; font-size:18px; color:#666; }
.card p{ font-size:16px; font-weight:bold; }

/* Charts */
.charts{ display:grid; grid-template-columns:2fr 1fr; gap:15px; margin-bottom:16px; }
.chart-container{ position:relative; background:#fff; padding:10px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.1); display:flex; flex-direction:column; min-height:320px; }
.chart-container h3{ font-size:18px; margin-bottom:8px; flex-shrink:0; }
.chart-container canvas{ width:100% !important; height:100% !important; display:block; }
.chart-note p{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; border-radius:8px; font-size:18px; }

/* Recent */
.recent-card{ background:#fff; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.08); padding:12px; margin-top:10px; display:flex; flex-direction:column; gap:10px; }
.recent-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.recent-header h3{ margin:0; font-size:18px; color:#2d3e50; font-weight:600; }
.btn-view-all,.btn-danger{ padding:6px 12px; font-size:13px; border:1px solid #d7d9ff; background:#f4f6ff; color:#4a4fd4; border-radius:8px; cursor:pointer; transition:background .15s ease, transform .05s ease; }
.btn-view-all,.btn-danger:hover{ background:#eef0ff; }
.btn-view-all,.btn-danger:active{ transform:translateY(1px); }
.recent-table-wrap{ width:100%; overflow:auto; }
.recent-table{ width:100%; border-collapse:collapse; font-size:14px; min-width:720px; table-layout:auto; }
.recent-table th,.recent-table td{ padding:10px 12px; border-bottom:1px solid #f0f2f7; color:#334155; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; vertical-align:middle; text-align:left; }
.recent-table thead th{ background:#f7f8ff; font-weight:600; color:#475569; }
.recent-table th:nth-child(4),.recent-table td:nth-child(4){ text-align:center !important; padding-right:12%; min-width:140px; font-variant-numeric:tabular-nums; font-feature-settings:"tnum" 1,"lnum" 1; }
.recent-table th:nth-child(5),.recent-table td:nth-child(5){ text-align:left !important; min-width:110px; }
.text-right{ text-align:right; width:60%; }
.amt-green{ color:#16a34a; font-weight:600; }
.amt-red{ color:#dc2626; font-weight:600; }

/* Drawer overlay */
.drawer-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(1px); z-index:998; display:none; }
.close-mobile{ display:none; position:absolute; right:10px; top:10px; width:30px; height:30px; border-radius:8px; border:1px solid #e6e8ff; background:#fff; color:#25295A; cursor:pointer; font-size:18px; }

/* ===== MODAL: ensure it's on top of everything ===== */
.modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.4); backdrop-filter:blur(1px); z-index:1300; }
.modal-shell{ position:fixed; inset:0; padding:24px; display:flex; align-items:center; justify-content:center; z-index:1305; }
.modal-content{
  position:relative; z-index:1310;
  width:min(96vw, 880px); max-height:88vh; overflow:auto;
  background:#fff; border-radius:16px; padding:20px;
  box-shadow:0 20px 25px -5px rgba(0,0,0,.10), 0 10px 10px -5px rgba(0,0,0,.04);
}

/* Reused dialog header */
.form-card-header{ display:flex; align-items:center; justify-content:space-between; padding:0 0 12px 0; border-bottom:1px solid #eef2f7; }
.form-card-title{ margin:0; font-size:22px; font-weight:600; color:#656ed3; }
.icon-btn{ appearance:none; border:none; background:transparent; width:32px; height:32px; font-size:22px; line-height:1; border-radius:8px; color:#6B7280; cursor:pointer; transition:all .2s ease; }
.icon-btn:hover{ background:#F3F4F6; color:#374151; }

/* Minimal inline budget form */
.budget-form label{ display:flex; flex-direction:column; gap:6px; font-size:13px; color:#333; }
.budget-form input,.budget-form select,.budget-form textarea{ width:100%; padding:8px 10px; border:1px solid #dcdcdc; border-radius:6px; background:#fff; font-size:14px; }
.form-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }
.form-actions button{ padding:8px 14px; border:none; border-radius:6px; cursor:pointer; background:#534CA4; color:#fff; }
.form-actions .secondary{ background:#e7e7ef; color:#333; }

/* Badges */
.badge{ display:inline-flex; align-items:center; gap:6px; font-size:12px; padding:4px 8px; border-radius:999px; font-weight:600; }
.badge-credit{ background:#e6f7f0; color:#0f766e; }
.badge-debit{ background:#fdecec; color:#b91c1c; }
.recent-empty{ padding:14px; color:#667085; font-size:14px; }

/* Responsive tables */
@media (max-width:900px){
  .recent-table{ min-width:0; table-layout:fixed; }
  .recent-table-wrap{ overflow:visible; }
  .recent-table th,.recent-table td{ white-space:normal; text-overflow:clip; }
}
@media (max-width:640px){
  .recent-table thead{ display:none; }
  .recent-table,.recent-table tbody,.recent-table tr,.recent-table td{ display:block; width:100%; }
  .recent-table tr{ margin-bottom:12px; background:#fff; border:1px solid #eef2f7; border-radius:10px; padding:10px 12px; box-shadow:0 2px 6px rgba(0,0,0,.06); }
  .recent-table td{ display:grid; grid-template-columns:120px 1fr; gap:8px; border:0; padding:8px 0; align-items:center; }
  .recent-table td::before{ content:attr(data-label); font-weight:600; color:#475569; }
  .recent-table td:nth-child(1)::before{ content:"Date"; }
  .recent-table td:nth-child(2)::before{ content:"Description"; }
  .recent-table td:nth-child(3)::before{ content:"Category"; }
  .recent-table td:nth-child(4)::before{ content:"Amount"; }
  .recent-table td:nth-child(5)::before{ content:"Type"; }
  .recent-table th:nth-child(4),.recent-table td:nth-child(4),
  .recent-table th:nth-child(5),.recent-table td:nth-child(5){ text-align:left !important; padding-right:0; min-width:0; }
}

/* Budget table */
.budget-table-wrap{ width:100%; overflow:auto; }
.budget-table{ width:100%; border-collapse:collapse; font-size:14px; min-width:720px; table-layout:auto; }
.budget-table th,.budget-table td{ padding:10px 12px; border-bottom:1px solid #f0f2f7; color:#334155; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; vertical-align:middle; text-align:left; }
.budget-table thead th{ background:#f7f8ff; font-weight:600; color:#475569; }
@media (max-width:900px){
  .budget-table{ min-width:0; table-layout:fixed; }
  .budget-table-wrap{ overflow:visible; }
  .budget-table th,.budget-table td{ white-space:normal; text-overflow:clip; }
}
@media (max-width:640px){
  .budget-table thead{ display:none; }
  .budget-table,.budget-table tbody,.budget-table tr,.budget-table td{ display:block; width:100%; }
  .budget-table tr{ margin-bottom:12px; background:#fff; border:1px solid #eef2f7; border-radius:10px; padding:10px 12px; box-shadow:0 2px 6px rgba(0,0,0,.06); }
  .budget-table td{ display:grid; grid-template-columns:130px 1fr; gap:8px; border:0; padding:8px 0; align-items:center; text-align:left !important; padding-right:0; min-width:0; }
  .budget-table td::before{ content:attr(data-label); font-weight:600; color:#475569; }
  .budget-table td:nth-child(1)::before{ content:"Category"; }
  .budget-table td:nth-child(2)::before{ content:"Budget"; }
  .budget-table td:nth-child(3)::before{ content:"Spent"; }
  .budget-table td:nth-child(4)::before{ content:"Remaining"; }
  .budget-table td:nth-child(5)::before{ content:"Period"; }
  .budget-table td:nth-child(6)::before{ content:"Actions"; }
  .budget-table .progress,.budget-table .chip{ max-width:100%; }
}

/* Drawer (tablet and down) */
@media (max-width:1024px){
  .hamburger{ display:inline-flex; }
  .top-bar h1{ font-size:28px; }
  .sidebar{
    position:fixed; top:0; left:0;
    height:100vh; height:100dvh; height:100svh; width:280px;
    transform:translateX(-100%); transition:transform .25s ease;
    z-index:999; box-shadow:0 20px 50px rgba(0,0,0,.25);
  }
  .sidebar.open{ transform:translateX(0); }
  .drawer-overlay.open{ display:block; }
  .sidebar.open + .main .top-bar--sticky{ pointer-events:none; }
  .close-mobile{ display:inline-flex; align-items:center; justify-content:center; }
  .menu a{ font-size:15px; padding:10px 14px; }
  .profile{ margin:12px; }
  .cards{ grid-template-columns:repeat(2,1fr); }
  .charts{ grid-template-columns:1fr; }
}

/* Phones */
@media (max-width:768px){
  .top-bar h1{ font-size:24px; }
  .cards{ grid-template-columns:1fr 1fr; }
}
@media (max-width:480px){
  .top-bar h1{ font-size:20px; }
  .cards{ grid-template-columns:1fr; }
  .menu a{ font-size:14px; }
}
